<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Rodrigo García - Product Designer</title>
  <style>
    /* Reset y estilos base */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html, body {
      height: 100%;
      overflow: hidden;
      font-family: sans-serif;
    }

    a {
/*      text-decoration: none;*/
      transition: opacity 0.3s ease;
    }

    a:hover {
      opacity: 0.7;
      text-decoration: none;
    }

    /* Preloader */
    #preloader {
      position: fixed;
      z-index: 9999;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background-color: #000;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: opacity 0.5s ease;
    }

    #progress-bar {
      width: 80%;
      height: 4px;
      background-color: rgba(255, 255, 255, 0.2);
      position: relative;
      overflow: hidden;
      border-radius: 2px;
    }

    #progress {
      height: 100%;
      background-color: white;
      width: 0;
      transition: width 0.3s ease;
      border-radius: 2px;
    }

    /* Layout principal */
    .container {
      display: flex;
      flex-direction: row;
      height: 100vh;
      width: 100vw;
      transition: all 0.5s ease;
      visibility: hidden;
    }

    .left, .right {
      flex: 1;
      display: flex;
      justify-content: flex-start;
      align-items: flex-start;
      flex-direction: column;
      padding: 50px;
      transition: background-color 1s ease;
      overflow: hidden;
      position: relative;
    }

    /* Estilos para textos */
    h1 {
      max-width: 100%;
    text-align: left;
    margin-bottom: 0;
    font-size: 14vh;
    transform: rotate(180deg);
    /* position: relative; */
    top: 0;
    left: 500px;
    z-index: 1;
    width: auto;
    height: auto;
    line-height: 1em;
    writing-mode: vertical-rl;
    text-align: center;
    }

    p, ul li {
      max-width: 100%;
      text-align: left;
      font-size: 1.8vw;
      line-height: 1.5;
      margin-bottom: 1.2em;
    }

    .text-wrapper {
      width: 100%;
      height: 100%;
      padding: 2vw;
      overflow: visible;
      display: flex;
      justify-content: start;
      margin: 80px 0;
    }

    .text-wrapper #title, 
    .text-wrapper .paragraph1, 
    .text-wrapper .paragraph2 {
      width: 90%;
      line-height: 1.4;
/*      text-transform: uppercase;*/
    }

    /* Navegación */
    /*ul {
      position: absolute;
      bottom: 140px;
      right: -80px;
      transform: rotate(-90deg);
    }*/

    ul li {
      list-style: none;
      display: inline;
      margin-right: 24px;
    }

    ul li a {
/*      text-transform: uppercase;*/
    }

    /* Imágenes flotantes - Ajustes corregidos */
    .floating-img {
      position: absolute;
      opacity: 0;
      will-change: transform, opacity;
      max-width: 33%;
      height: auto;
      border-radius: 8px;
      transition: opacity 1.5s ease;
      /*      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);*/
    }

    /* Media queries */
    @media (max-width: 1024px) {
      .container {
        display: block;
      }

      .right {
        padding: 24px !important;
        position: absolute !important;
        display: flex;
        justify-content: center;
        align-items: center;
        overflow: visible;
        height: 100% !important;
        width: 100%;
        top: 0;
        left: 0;
      }

      .left {
        background: white;
        margin: 24px;
        width: calc(100% - 48px) !important;
        height: auto !important;
        position: relative;
        padding: 24px !important;
        top: 0;
        left: 0;
        z-index: 2;
        opacity: 0.9;
        border-radius: 8px;
      }

      .floating-img {
        animation: none !important;
        border-radius: 8px;
      }
      
      ul {
        position: relative !important;
        bottom: auto !important;
        margin-top: 1.2em;
        transform: none !important;
        right: auto;
      }
      
      h1, p, ul li {
        font-size: 2.1vh !important;
      }
      h1 {
        writing-mode: horizontal-tb;
        transform: none;
        font-size: 10vh !important;
        writing-mode: initial;
        position: relative;
        left: 0;
      }
    }
  </style>
</head>
<body>
  <div id="preloader">
    <div id="progress-bar">
      <div id="progress"></div>
    </div>
  </div>

  <div class="container">
      <h1 id="title">Hi, welcome</h1>
    <div class="left text-wrapper">
      <p class="paragraph1">I'm Rodrigo García, a Product Designer with over 8 years of experience in user-centered design and a solid 10-year background in front-end development. This site was once my personal portfolio, but after discontinuing the portfolio service, it's now a static page. If you'd like to see my work, feel free to <a class="enlace" href="https://www.linkedin.com/in/rodrigogarciasolis/" target="_blank">request a PDF version</a>.</p>
      <p class="paragraph2"> Over the years, I've worked at design agencies, big companies, and early-stage startups. I design with users in mind, always. My tech background helps me imagine solutions that not only work, but also align with business goals and fit the realities of the product roadmap.</p>
      <ul>
        <li><a class="lista1 enlace" href="https://www.linkedin.com/in/rodrigogarciasolis/" target="_blank">Contact</a></li>
        <li><a class="lista2 enlace" href="https://drive.google.com/file/d/1MJ7_n_PuimtyUmtU6XeYBXW9dSaqpSJK/view" target="_blank">CV</a></li>
      </ul>
    </div>
    <div class="right" id="right-container"></div>
  </div>

  <script>
  // Array de pares tipográficos actualizados (todos disponibles en Google Fonts)
  const fontPairs = [
    ['Bebas Neue', 'Open Sans'],
    ['Playfair Display', 'Source Sans Pro'],
    ['Archivo Black', 'Roboto'],
    ['Crimson Text', 'Work Sans'],
    ['Montserrat', 'Merriweather'],
    ['Anton', 'Fira Sans'],
    ['Oswald', 'Nunito'],
    ['DM Serif Display', 'Poppins'],
    ['Abril Fatface', 'Lato'],
    ['Raleway', 'Lora'],
    ['Bitter', 'IBM Plex Sans'],
    ['Space Grotesk', 'Space Mono']
  ];

  // Función principal de inicialización
  function initializePortfolio() {
    // Configuración de colores y tipografías
    setupDesign();
    
    // Carga de imágenes
    loadPortfolioImages();
  }

  // Configuración de diseño: colores y tipografías
  function setupDesign() {
    // Seleccionar un par de fuentes aleatorio
    const [titleFont, paragraphFont] = fontPairs[Math.floor(Math.random() * fontPairs.length)];
    
    // Cargar fuentes desde Google Fonts
    const fontLink = document.createElement("link");
    fontLink.rel = "stylesheet";
    fontLink.href = `https://fonts.googleapis.com/css2?family=${titleFont.replace(/ /g, '+')}&family=${paragraphFont.replace(/ /g, '+')}&display=swap`;
    document.head.appendChild(fontLink);
    
    // Generar esquema de colores
    const rightColorHSL = getRandomHSL();
    // Usamos el mismo color base pero con otro tono para el lado izquierdo
    const leftColorHSL = { 
      h: (rightColorHSL.h + 180) % 360, 
      s: rightColorHSL.s, 
      l: rightColorHSL.l 
    };
    const rightColor = hslToCSS(rightColorHSL);
    const leftColor = hslToCSS(leftColorHSL);
    
    // Aplicar estilos
    applyStyles(titleFont, paragraphFont, leftColor, rightColor);
  }

  // Funciones de utilidad para colores
  const hslToCSS = ({ h, s, l }) => `hsl(${h}, ${s}%, ${l}%)`;
  const rgbToHSL = (r, g, b) => {
    r /= 255;
    g /= 255;
    b /= 255;
    const max = Math.max(r, g, b);
    const min = Math.min(r, g, b);
    let h, s, l = (max + min) / 2;

    if (max === min) {
      h = s = 0; // achromatic
    } else {
      const d = max - min;
      s = l > 0.5 ? d / (2 - max - min) : d / (max + min);
      switch (max) {
        case r: h = (g - b) / d + (g < b ? 6 : 0); break;
        case g: h = (b - r) / d + 2; break;
        case b: h = (r - g) / d + 4; break;
      }
      h /= 6;
    }

    return {
      h: Math.round(h * 360),
      s: Math.round(s * 100),
      l: Math.round(l * 100)
    };
  };
  
  // Color base para el fondo (rgb(228, 229, 218) convertido a HSL)
  const baseBackgroundColorHSL = rgbToHSL(228, 229, 218);
  
  // Función para obtener una variación del color base (solo cambia el tono)
  const getRandomHSL = () => ({
    h: Math.floor(Math.random() * 360),
    s: baseBackgroundColorHSL.s,
    l: baseBackgroundColorHSL.l
  });
  
  // Color fijo para el texto (rgb(45, 40, 37))
  const fixedTextColor = 'rgb(45, 40, 37)';
  
  // Esta función ya no se usa pero la dejamos por compatibilidad
  const getComplementaryHSL = hsl => ({ h: (hsl.h + 180) % 360, s: hsl.s, l: hsl.l });
  
  // Esta función siempre devuelve el color fijo para texto
  const getTextColor = () => fixedTextColor;

  // Aplicar estilos al DOM
  function applyStyles(titleFont, paragraphFont, leftColor, rightColor) {
    const elements = {
      title: document.getElementById('title'),
      paragraph1: document.querySelector('.paragraph1'),
      paragraph2: document.querySelector('.paragraph2'),
      lista1: document.querySelector('.lista1'),
      lista2: document.querySelector('.lista2'),
      left: document.querySelector('.left'),
      right: document.getElementById('right-container'),
      preloader: document.getElementById('preloader'),
      progress: document.getElementById('progress'),
      container: document.querySelector('.container'),
      enlaces: document.querySelectorAll('.enlace')
    };
    
    // Color fijo para texto
    const textColor = fixedTextColor;
    
    // Colores de fondo
    document.body.style.backgroundColor = rightColor;
    elements.preloader.style.backgroundColor = rightColor;
    elements.progress.style.backgroundColor = leftColor;
    elements.left.style.backgroundColor = leftColor;
    elements.right.style.backgroundColor = rightColor;
    
    // Tipografías
    elements.title.style.fontFamily = `'${titleFont}', sans-serif`;
    elements.paragraph1.style.fontFamily = `'${paragraphFont}', sans-serif`;
    elements.paragraph2.style.fontFamily = `'${paragraphFont}', sans-serif`;
    elements.lista1.style.fontFamily = `'${paragraphFont}', sans-serif`;
    elements.lista2.style.fontFamily = `'${paragraphFont}', sans-serif`;
    
    // Colores de texto
    elements.title.style.color = textColor;
    elements.paragraph1.style.color = textColor;
    elements.paragraph2.style.color = textColor;
    elements.lista1.style.color = textColor;
    elements.lista2.style.color = textColor;
    
    // Enlaces
    elements.enlaces.forEach(enlace => {
      enlace.style.color = textColor;
    });
  }

  // Cargar y mostrar imágenes del portfolio
  function loadPortfolioImages() {
    const totalImages = 44;
    let imagesLoaded = 0;
    const progress = document.getElementById('progress');
    const preloader = document.getElementById('preloader');
    const container = document.querySelector('.container');
    
    // Generar rutas de imágenes
    const imagePaths = Array.from({ length: totalImages }, (_, i) =>
      `img/portfolio_${String(i + 1).padStart(2, '0')}.png`
    );
    
    // Precargar imágenes
    const preloadImages = imagePaths.map(src => {
      return new Promise(resolve => {
        const img = new Image();
        img.src = src;
        img.onload = () => {
          imagesLoaded++;
          progress.style.width = `${(imagesLoaded / totalImages) * 100}%`;
          resolve(src);
        };
        img.onerror = () => {
          imagesLoaded++;
          progress.style.width = `${(imagesLoaded / totalImages) * 100}%`;
          console.warn(`Failed to load image: ${src}`);
          resolve(null);
        };
      });
    });
    
    // Cuando todas las imágenes estén cargadas
    Promise.all(preloadImages)
      .then(loadedSources => {
        // Filtrar las imágenes que se cargaron correctamente
        const validSources = loadedSources.filter(src => src !== null);
        
        // Ocultar preloader
        preloader.style.opacity = '0';
        setTimeout(() => {
          preloader.remove();
          container.style.visibility = 'visible';
          
          // Iniciar animación de imágenes
          floatImagesSequentially(validSources);
        }, 500);
      })
      .catch(error => {
        console.error('Error cargando imágenes:', error);
        // Asegurar que la página se muestre incluso si hay errores
        preloader.style.opacity = '0';
        setTimeout(() => {
          preloader.remove();
          container.style.visibility = 'visible';
        }, 500);
      });
  }

  // Función para barajar un array (algoritmo Fisher-Yates)
  function shuffleArray(array) {
    const newArray = [...array];
    for (let i = newArray.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
    }
    return newArray;
  }

  // Animación secuencial de imágenes flotantes - CORREGIDA
  async function floatImagesSequentially(imageList) {
    const rightContainer = document.getElementById('right-container');
    const shuffledImages = shuffleArray([...imageList]);
    let isRunning = true;
    let currentlyAnimating = false;

    // Crear función para detener animaciones si el usuario navega fuera
    window.addEventListener('beforeunload', () => {
      isRunning = false;
    });

    // Bucle continuo para mostrar imágenes indefinidamente
    while (isRunning) {
      for (const src of shuffledImages) {
        if (!isRunning) break;
        
        // Esperar a que la imagen anterior haya recorrido parte del camino
        if (currentlyAnimating) {
          await new Promise(resolve => setTimeout(resolve, 2000)); // Esperar entre imágenes
        }
        
        currentlyAnimating = true;
        
        const img = document.createElement("img");
        img.src = src;
        img.classList.add("floating-img");
        img.style.left = `${Math.random() * 60 + 20}%`; // Ajuste para mejor posicionamiento horizontal
        img.style.bottom = '-20%'; // Empieza fuera de la pantalla por abajo
        img.style.transition = 'transform 15s linear, opacity 1.5s ease';
        rightContainer.appendChild(img);

        // Forzar repaint
        void img.offsetHeight;

        // Iniciar la animación con fade-in
        setTimeout(() => {
          img.style.opacity = '1';
          img.style.transform = 'translateY(-120vh)'; // Mover hacia arriba
        }, 50);

        // Controlar el fade-out cuando la imagen llega a la parte superior
        setTimeout(() => {
          img.style.opacity = '0';
          
          // Eliminar imagen después de que se haya desvanecido
          setTimeout(() => {
            img.remove();
          }, 1500);
        }, 13500); // Tiempo antes de iniciar fade-out
        
        // Esperar antes de permitir que la siguiente imagen comience
        await new Promise(resolve => {
          setTimeout(() => {
            resolve();
          }, 3000); // Tiempo antes de permitir la siguiente imagen
        });
      }
      
      // Barajar de nuevo las imágenes para la próxima iteración
      shuffleArray(shuffledImages);
    }
  }

  // Inicializar
  document.addEventListener('DOMContentLoaded', initializePortfolio);
  </script>
</body>
</html>